FORMAT: 1A
HOST: http://185.26.115.63

# SalesFor.Me

Версия 1.0

Все методы доступа к API доступны с префиксом /api/v1/

# Group Информационные методы

## Получение основных данных системы [/info]

### Запрос данных [GET]

+ Response 200 (application/json)

    + Body
    
            {
                "version": "1.0.0",
                "description": "API SalesForMe",
                "vk_app": 5222884,
                "vk_api_version": "5.52",
                "fb_app": 152750598427241,
                "google_app": "799617381412-qg9dbdsmtfr0aiui4o11btj0a368l3gh.apps.googleusercontent.com",
                "mailru_app": 746248
            }

# Group Авторизация пользователя

## Прямая авторизация пользователя [/auth]

### Запрос авторизации [POST]

+ Request (x-www-form-urlencoded)

            "email": "test@salesfor.me",
            "password": "userpassword",

+ Request (application/json)

    + Body

            {
                "email": "testuser",
                "password": "userpassword"
            }

+ Response 200 (application/json)

  + Body

            {
                "meta": { },
                "result": {
                    "sid": "c354b133-b7cb-4aab-949e-a669e68b9c0d.1469648474933.51a4824a1fdc629a3f30886290d26828b036edb6",
                    "auth": {
                        "uuid": "c354b133-b7cb-4aab-949e-a669e68b9c0d"
                    }
                }
            }


## Авторизация через соцсети [/auth?id=:id&code=:code&redirect_uri=:redirect_uri]

+ Parameters
    
    + id -- string, social network name (fb, vk)
    + code -- string, authorization code
    + redirect_uri -- тот же URL, который был указан в строке запроса авторизации 
    соцсети при прохождении процедуры OAuth2 авторизации

### Запрос авторизации [GET]

Описание ответа системы:

+ `sid` -- идентификатор сессии пользователя, используется в заголовке `x-session-id` 
+ `auth`:
    + `uuid` -- пользовательский уникальный номер в системе
    + `access_data` -- авторизационные данные соцсети

+ Response 200 (application/json)

    + Body

            {
                "meta": {},
                "result": {
                    "sid": "0ab372c9-2d4b-4c47-8373-b764d92c6092.1469648167592.0e7dbffba0fabce18341e1ce407c452b7d33567d",
                    "auth": {
                        "uuid": "0ab372c9-2d4b-4c47-8373-b764d92c6092",
                        "access_data": {
                            "access_token": "ya29.CjAtA-dWSM-80aOnvwa96zvfUBHdHn7p8oJuHCU4-ew6PVPyQrr2zSeMAEv-VKCGT5A",
                            "token_type": "Bearer",
                            "expires_in": 3599,
                            "id_token": "eyJhbGciOiJSUzI1NiIsImtpZCI6IjUwNzgyYmNmMGE5NzQxZTZiZjkwMjY2ZGMzNTY4YWE5MDc5MWYxNmYifQ.eyJpc3MiOiJodHRwczovL2FjY291bnRzLmdvb2dsZS5jb20iLCJhdF9oYXNoIjoiVkV4eHVxc0FSbG4zQ3RCNkFaM0NjQSIsImF1ZCI6Ijc5OTYxNzM4MTQxMi1xZzlkYmRzbXRmcjBhaXVpNG8xMWJ0ajBhMzY4bDNnaC5hcHBzLmdvb2dsZXVzZXJjb250ZW50LmNvbSIsInN1YiI6IjEwNDAyNTY0MzY2MzI1MTM3NjQ3NCIsImVtYWlsX3ZlcmlmaWVkIjp0cnVlLCJhenAiOiI3OTk2MTczODE0MTItcWc5ZGJkc210ZnIwYWl1aTRvMTFidGowYTM2OGwzZ2guYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLCJoZCI6IjY1YXBwcy5jb20iLCJlbWFpbCI6ImFiYWJraW5ANjVhcHBzLmNvbSIsImlhdCI6MTQ2OTY0ODE2NywiZXhwIjoxNDY5NjUxNzY3fQ.RnvEDNe6k5ttX00I2bbFbT3ZilaPu3ZqqBXIKTLj7WaFx7Alw6W4yZO_FGTYDxCedr0O0nOg6xh5J4buPK26Pbt57XnZqyYMEucHUjuXz3VOFOIRb_lqTAW5YOM7TvylHJF_mMIzH5HjXVgkdj8Jdtl29-J3q-sFhMmHzm45EPKPp9kwnO4eVK1mhLk7YmmQP8dwSFi-a-0Ti8LZNMm7fPEw9AvXujwcrLIPjZVOmC_udrAcUNWaz46QrHtsB3c9dX-kyjkfvS3MZ9xwTlLyglvx6LxI2iBK1etl6Pt5cXxaEM-wAFE4mteDLFtXxaO6yCcHnOKW2nRt7roWZ-Z6PA"
                        }
                    }
                }
            }

# Group Методы авторизованного доступа к системе

Все, перечисленные ниже методы требуют указания заголовка запроса `x-session-id`, полученного в результате авторизации пользователя в системе.

## Пользователи системы [/users]

## Текущий пользователь системы [/users/me]

### Получение данных [GET]

+ Request

    + Headers

            X-Session-Id: c354b133-b7cb-4aab-949e-a669e68b9c0d.1470060821891.e92ea61b90ba93533a49f0a30f7ea18ffabd9532

+ Response (application/json)

    + Body

            {
                "meta": { },
                "result": {
                    "uuid": "c354b133-b7cb-4aab-949e-a669e68b9c0d",
                    "created": "2016-07-22T19:03:24.187Z",
                    "regs": [
                        {
                            "user": "c354b133-b7cb-4aab-949e-a669e68b9c0d",
                            "type": "VK",
                            "email": "test@test.com",
                            "user_id": "7450050",
                            "created": "2016-07-22T19:03:24.281Z",
                            "authorized": "2016-08-01T14:13:41.885Z"
                        },
                        {
                            "user": "c354b133-b7cb-4aab-949e-a669e68b9c0d",
                            "type": "native",
                            "email": "ab@izh.com",
                            "user_id": "test@test.com",
                            "created": "2016-07-25T19:02:44.337Z",
                            "authorized": "2016-07-25T19:41:54.882Z"
                        }
                    ]
                }
            }

## Акции [/actions]

## Акции [/actions/{uuid}]

### Получение данных [GET]

+ Request

    + Headers

            X-Session-Id: c354b133-b7cb-4aab-949e-a669e68b9c0d.1470060821891.e92ea61b90ba93533a49f0a30f7ea18ffabd9532

+ Response (application/json)

    + Body

            {
                "meta": { },
                "result": {
                    "uuid": "",
                    "title": "",
                    "category": "",
                    "cat2gis": "",
                    "description": "",
                    "discount_value": 20,
                    "discount_min": 20,
                    "discount_max": 30,
                    "expiration_begin": "2016-08-01T23:59:59+4",
                    "expiration_end": "2016-08-01T23:59:59+4",
                    "expiration_interval": {
                        "days": 6,
                        "hours": 23,
                        "minutes": 59
                    },
                    "shop": {
                        "uuid": "d321be07-a592-4379-98f7-bf5f6d1fefab",
                        "title": "ООО \"Бюро вечных услуг\"",
                        "phone": "89125554433",
                        "address": "РФ, г.Казань, пр. Амирхана, д. 22",
                        "href": "http://bes.ru",
                        "latitude": 567123,
                        "longitude": 512354,
                        "accuracy": 10
                    },
                    "images": [
                        "0e4ffced-b242-4eae-bea2-04f10eefd756"
                    ]
                    "rating": "4"
                }   
            }

## Акции [/actions/{uuid}/rating]

### Получение списка оценок акции [GET]

+ Request

    + Headers

            X-Session-Id: c354b133-b7cb-4aab-949e-a669e68b9c0d.1470060821891.e92ea61b90ba93533a49f0a30f7ea18ffabd9532

+ Response (application/json)

    + Body

            {
                "meta": { },
                "result": [
                ]
            }

